<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <h1>My Account</h1>
            <small>Welcome, {{user.firstName}}!</small>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-4">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3>Account information </h3>
                </div>
                <div class="panel-body">
	                <div class="form-group">
	                    <label>Your name:</label>
	                    <p class="form-control-static">{{user.firstName}} {{user.lastName}}</p>
	                </div>
	                <div class="form-group">
	                    <label>Your email:</label>
	                    <p class="form-control-static">{{user.email}}</p>
	                </div>
	                <div class="form-group">
	                    <label>User ID:</label>
	                    <p class="form-control-static">{{user._id}}</p>
	                </div>	                
	                <div class="form-group">
	                    <label>Address</label>
	                    <p class="form-control-static">{{user.homeAddress}}</p>
	                </div>
	                <div class="form-group">
	                    <label>Phone number</label>
	                    <p class="form-control-static">{{user.phone}}</p>
	                </div>	
	                <div ng-if="isChef()" class="form-group">
	                    <label>Cuisine specialty</label>
	                    <p class="form-control-static">{{user.specialty}}</p>
	                </div>	
	                <div ng-if="isChef()" class="form-group">
	                    <label>Bio</label>
	                    <p class="form-control-static">{{user.bio}}</p>
	                </div>	   
	                <div ng-if="isChef()" class="form-group">
	                    <label>Picture</label>
	                    <p class="form-control-static">{{user.picture}}</p>
	                </div>             		                                		                
                </div>
            </div>
        </div>

        <div class="col-lg-8">
        	<div class="panel panel-default">
	        	<div class="panel-heading"><h3>Your Transactions</h3></div>
	        	<div class="panel-body" ng-repeat="transaction in allTransactions | orderBy : 'status'">
	        		<h4>Order date: {{transaction.date | date}}</h4>
	        		<h4>Status: {{transaction.status }}</h4>
	                <div class="table-responsive table-bordered">
	                    <table class="table">
	                        <thead>
	                            <tr>
	                                <th>Meal</th>
	                                <th>Price</th>
	                            </tr>
	                        </thead>
	                        <tbody>
	                            <tr ng-repeat="meal in transaction.meals">
		                            <td><a ui-sref="meal({id: meal._id})"> {{meal.name}}</a></td>
	                                <td>{{meal.price | currency }}</td>
	                            </tr>

	                        </tbody>
	                    </table>
                    </div>
                </div>
            </div>
        </div>

        </div> <!-- close row -->

        <div class="row">

	        <div class="col-lg-12">
	        	<div class="panel panel-default">
		        	<div class="panel-heading"><h3>Add a new meal</h3></div>
		        	<div class="panel-body" >

		                <form ng-submit="addMeal(newMeal)">

		                <div class="row">
			                <div class="col-lg-4">
								<div class="form-group">
		                            <label for="chefmeal">Meal Name</label>
		                            <input class="form-control" placeholder="Enter meal name" ng-model="newMeal.name">
		                        </div>
		                    </div>
		                    <div class="col-lg-4">
								<div class="form-group">
		                            <label for="chefmeal">Cuisine</label>
		                            <input class="form-control" placeholder="Enter meal name" ng-model="newMeal.cuisine">
		                        </div>
		                    </div>
			                <div class="col-lg-4">
								<div class="form-group">
		                            <label for="chefmeal">Meal Photo</label>
		                            <input class="form-control" placeholder="Enter meal URL, beginning with http://" ng-model="newMeal.photo">
		                        </div>
		                    </div>

		                    <div class="col-lg-2">
		                       <div class="form-group">
		                            <label for="chefmeal">Qty Avail.</label>
		                            <input class="form-control" placeholder="Enter quantity available" ng-model="newMeal.quantity">
		                        </div>
		                    </div>

		                    <div class="col-lg-2">
		                       <div class="form-group">
		                            <label for="chefmeal">Servings</label>
		                            <input class="form-control" placeholder="Enter quantity available" ng-model="newMeal.servings">
		                        </div>
		                    </div>

		                    <div class="col-lg-2">
		                        <div class="form-group">
		                            <label for="chefmeal">Price</label>
		                            <input class="form-control" placeholder="Enter price" ng-model="newMeal.price">
		                        </div>
		                    </div>
	                    </div>
		                <div class="row">
		                    <div class="col-lg-12">
		                        <div class="form-group">
		                            <label for="chefmeal">Meal Description</label>
		                            <textarea class="form-control" rows="4" placeholder="Enter description" ng-model="newMeal.description"></textarea>
		                        </div>
	                        </div>
	                    </div>
						<button type="submit" class="btn btn-default btn-primary">Add meal</button>
						</form>
					</div>
				</div>
			</div>
		</div>

		<div class="row">
	        <div class="col-lg-12">
	        	<div class="panel panel-default">
		        	<div class="panel-heading"><h3>Edit an Existing Meal</h3></div>
		        	<div class="panel-body" >
						<div class="panel-group" id="accordion">
			                <div class="panel panel-default" ng-repeat="meal in allMyMeals track by $index">
			                    <div class="panel-heading">
			                        <h4 class="panel-title">
			                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" class="collapsed">{{meal.name}}</a>
			                        </h4>
			                    </div>
			                    <div id="collapseOne" class="panel-collapse collapse" aria-expanded="false">
			                        <div class="panel-body">

						                <form ng-submit="updateMeal(updatedMeal)">
						                	<div class="row">
								                <div class="col-lg-4">
													<div class="form-group">
							                            <label for="chefmeal" ng-model="updatedMeal.name">Meal Name</label>
							                            <input class="form-control" value="{{meal.name}}">
							                        </div>
							                    </div>
								                <div class="col-lg-4">
													<div class="form-group">
							                            <label for="chefmeal" ng-model="updatedMeal.photo">Meal Photo</label>
							                            <input class="form-control" value="{{meal.photo}}">
							                        </div>
							                    </div>

							                    <div class="col-lg-2">
							                       <div class="form-group">
							                            <label for="chefmeal" ng-model="updatedMeal.quantity">Qty Avail.</label>
							                            <input class="form-control" value="{{meal.quantity}}">
							                        </div>
							                    </div>

							                    <div class="col-lg-2">
							                       <div class="form-group">
							                            <label for="chefmeal" ng-model="updatedMeal.servings">Servings</label>
							                            <input class="form-control" value="{{meal.servings}}">
							                        </div>
							                    </div>


							                    <div class="col-lg-2">
							                        <div class="form-group">
							                            <label for="chefmeal" ng-model="updatedMeal.price">Price</label>
							                            <input class="form-control" value="{{meal.price}}">
							                        </div>
							                    </div>
							                </div>

							                <div class="row">
							                    <div class="col-lg-12">
							                        <div class="form-group">
							                            <label for="chefmeal" ng-model="updatedMeal.description">Meal Description</label>
							                            <textarea class="form-control" rows="{{meal.description}}">Insert text from DB here</textarea>
							                        </div>
						                        </div>
						                    </div>
											<button type="submit" class="btn btn-success">Update meal</button>
										</form>
				                    </div>
				                </div>
			                </div>
			            </div>
	            </div>
	        </div>
	    </div>
    </div>
</div>
